<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Quiz Game 4 Ng∆∞·ªùi ‚Äî Chi·∫øc B√¨nh N·ª©t</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
html,body{height:100%;margin:0;display:flex;align-items:center;justify-content:center;
background:url('https://cdn.pixabay.com/photo/2015/01/08/18/26/desktop-593327_1280.jpg') no-repeat center center fixed;background-size:cover;
font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;color:#fff;}
.computer-frame{width:1000px;max-width:96%;border-radius:18px;padding:18px;background:linear-gradient(180deg,rgba(0,0,0,0.6),rgba(0,0,0,0.55));
box-shadow:0 30px 80px rgba(2,6,23,0.7);border:8px solid rgba(255,255,255,0.04);margin:auto;}
h1{text-align:center;margin:0 0 14px;font-size:26px}
.container{background:rgba(255,255,255,0.08);padding:18px;border-radius:12px;text-align:center}
.players{display:flex;gap:12px;justify-content:center;margin-bottom:12px;flex-wrap:wrap}
.players input{width:140px;padding:8px;border-radius:8px;border:none;text-align:center}
.start-btn{display:inline-block;margin:8px 6px;padding:10px 18px;border-radius:10px;border:none;background:linear-gradient(90deg,#7c3aed,#06b6d4);color:#fff;font-weight:700;cursor:pointer;transition:transform .2s}
.start-btn:hover{transform:scale(1.03)}
.game-area{display:flex;gap:18px;margin-top:14px;flex-wrap:wrap}
.left{flex:1}
.right{width:320px}
.question-card{background:rgba(255,255,255,0.04);padding:14px;border-radius:10px}
.answers button{display:block;width:100%;padding:10px;margin-bottom:8px;border-radius:8px;border:none;background:#fff;color:#111;cursor:pointer;transition:all 0.3s}
.score-board{background:rgba(255,255,255,0.04);padding:12px;border-radius:10px}
.score-item{display:flex;align-items:center;justify-content:space-between;padding:8px;background:rgba(0,0,0,0.2);border-radius:8px;margin-bottom:8px;transition:all 0.3s}
.score-item.top1 { border: 3px solid gold; box-shadow: 0 0 15px gold; }
.score-item.top2 { border: 3px solid silver; box-shadow: 0 0 15px silver; }
.score-item.top3 { border: 3px solid #cd7f32; box-shadow: 0 0 15px #cd7f32; }
.score-value{font-size:18px;font-weight:700;transition:all 0.3s}
.score-btn { font-weight:700; border-radius:8px; padding:6px 12px; cursor:pointer; transition: transform 0.2s, box-shadow 0.2s; border:none; color:#fff;}
.score-btn:hover { transform: scale(1.1); box-shadow:0 4px 12px rgba(0,0,0,0.4); }
#chartFull{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:9999;align-items:center;justify-content:center;flex-direction:column}
#chartFull canvas{width:80%!important;height:60%!important;background:#111;border-radius:12px;padding:8px}
.small-muted{font-size:13px;color:rgba(255,255,255,0.7)}
@media(max-width:860px){.game-area{flex-direction:column}.right{width:100%}}
</style>
</head>
<body>
<div class="computer-frame">
  <h1>üéâ Quiz 4 Ng∆∞·ªùi ‚Äî Chi·∫øc B√¨nh N·ª©t üéâ</h1>

  <div class="container" id="startScreen">
    <div class="small-muted">Nh·∫•n B·∫Øt ƒë·∫ßu ƒë·ªÉ v√†o v√≤ng quay ch·ªçn s·ªë may m·∫Øn</div>
    <button class="start-btn" id="startBtn">B·∫Øt ƒë·∫ßu</button>
  </div>

  <div class="container" id="wheelScreen" style="display:none;">
    <h2>üé° V√≤ng quay (43 s·ªë)</h2>
    <canvas id="wheelCanvas" width="400" height="400" style="border-radius:50%"></canvas>
    <div style="margin-top:8px">
      <button class="start-btn" id="spinBtn">Quay 1 s·ªë</button>
      <button class="start-btn" id="resetBtn">Reset</button>
    </div>
    <div id="luckyNumbers" class="small-muted" style="margin-top:10px"></div>
    <div style="margin-top:10px"><button class="start-btn" id="enterNameBtn" style="display:none">Nh·∫≠p t√™n</button></div>
  </div>

  <div class="container" id="nameScreen" style="display:none;">
    <h2>Nh·∫≠p t√™n 4 ng∆∞·ªùi ch∆°i</h2>
    <div class="players">
      <input id="name1" placeholder="Ng∆∞·ªùi 1">
      <input id="name2" placeholder="Ng∆∞·ªùi 2">
      <input id="name3" placeholder="Ng∆∞·ªùi 3">
      <input id="name4" placeholder="Ng∆∞·ªùi 4">
    </div>
    <div style="margin-top:10px">
      <button class="start-btn" id="startGameBtn">B·∫Øt ƒë·∫ßu tr√≤ ch∆°i</button>
      <button class="start-btn" id="backToWheelBtn">Quay l·∫°i v√≤ng quay</button>
    </div>
  </div>

  <div class="container" id="gameScreen" style="display:none">
    <div class="game-area">
      <div class="left">
        <div class="question-card" id="questionCard">
          <div class="question-title small-muted" id="questionTitle">C√¢u 1</div>
          <div class="question-text" id="questionText"></div>
          <div class="answers" id="answers"></div>
          <div style="margin-top:8px">
            <button class="start-btn" id="nextBtn" style="display:none">Ti·∫øp t·ª•c</button>
            <button class="start-btn" style="background:linear-gradient(90deg,#f43f5e,#f97316)" id="restartBtn">Restart</button>
          </div>
        </div>
      </div>
      <div class="right">
        <div class="score-board" id="scoreBoard"></div>
        <canvas id="scoreChart" width="300" height="200"></canvas>
      </div>
    </div>
  </div>
</div>

<div id="chartFull">
  <canvas id="scoreChartFull"></canvas>
  <div style="margin-top:12px">
    <button class="start-btn" id="closeChartBtn">ƒê√≥ng bi·ªÉu ƒë·ªì</button>
  </div>
</div>

<script>
const questions=[
 {q:"H√¨nh ·∫£nh hai chi·∫øc b√¨nh trong c√¢u chuy·ªán t∆∞·ª£ng tr∆∞ng cho ƒëi·ªÅu g√¨?",a:["S·ª± kh√°c nhau v·ªÅ h√¨nh d√°ng, m√†u s·∫Øc c·ªßa ƒë·ªì v·∫≠t","Nh·ªØng con ng∆∞·ªùi v·ªõi ∆∞u ƒëi·ªÉm v√† khi·∫øm khuy·∫øt ri√™ng","Nh·ªØng c√¥ng c·ª• lao ƒë·ªông c·ªßa ng∆∞·ªùi n√¥ng d√¢n","S·ª± ƒë·ªëi l·∫≠p gi·ªØa c√°i c≈© v√† c√°i m·ªõi"],correct:1},
 {q:"S·ª± d·∫±n v·∫∑t c·ªßa chi·∫øc b√¨nh n·ª©t th·ªÉ hi·ªán t√¢m tr·∫°ng n√†o c·ªßa con ng∆∞·ªùi?",a:["Ni·ªÅm t·ª± h√†o v·ªÅ gi√° tr·ªã b·∫£n th√¢n","S·ª± m·∫∑c c·∫£m, t·ª± ti khi th·∫•y m√¨nh kh√¥ng ho√†n h·∫£o","Ni·ªÅm vui khi ƒë∆∞·ª£c c·ªëng hi·∫øn","S·ª± th·ªù ∆°, v√¥ c·∫£m tr∆∞·ªõc cu·ªôc s·ªëng"],correct:1},
 {q:"√îng ch·ªß ƒë√£ c√≥ c√°ch nh√¨n nh·∫≠n v√† l·ªùi khuy√™n ra sao ƒë·ªëi v·ªõi chi·∫øc b√¨nh n·ª©t?",a:["Khuy√™n chi·∫øc b√¨nh h√£y c·ªë g·∫Øng che gi·∫•u khi·∫øm khuy·∫øt","Kh·∫≥ng ƒë·ªãnh v·∫øt n·ª©t ƒë√£ t·∫°o n√™n gi√° tr·ªã v√† c√°i ƒë·∫πp ri√™ng","ƒêem b·ªè chi·∫øc b√¨nh v√¨ kh√¥ng c√≤n gi√° tr·ªã s·ª≠ d·ª•ng","ƒê·ªÅ ngh·ªã s·ª≠a ch·ªØa ƒë·ªÉ chi·∫øc b√¨nh tr·ªü l·∫°i ho√†n h·∫£o"],correct:1},
 {q:"Lu·ªëng hoa m·ªçc b√™n ƒë∆∞·ªùng m√† chi·∫øc b√¨nh t∆∞·ªõi ƒë∆∞·ª£c c√≥ √Ω nghƒ©a g√¨?",a:["Trang tr√≠ cho con ƒë∆∞·ªùng th√™m ƒë·∫πp","Bi·ªÉu t∆∞·ª£ng cho nh·ªØng gi√° tr·ªã t√≠ch c·ª±c n·∫£y n·ªü t·ª´ khi·∫øm khuy·∫øt","Th·ªÉ hi·ªán s·ª± chƒÉm ch·ªâ c·ªßa √¥ng ch·ªß","Ch·ª©ng minh chi·∫øc b√¨nh kh√¥ng c√≤n v√¥ d·ª•ng"],correct:1},
 {q:"Th√¥ng ƒëi·ªáp s√¢u xa nh·∫•t m√† c√¢u chuy·ªán mu·ªën g·ª≠i g·∫Øm ƒë·∫øn ch√∫ng ta l√† g√¨?",a:["Con ng∆∞·ªùi c·∫ßn ho√†n h·∫£o ƒë·ªÉ ƒë∆∞·ª£c c√¥ng nh·∫≠n","Ch·ªâ khi m·∫°nh m·∫Ω m·ªõi c√≥ th·ªÉ th√†nh c√¥ng","Khi bi·∫øt ch·∫•p nh·∫≠n v√† ph√°t huy khi·∫øm khuy·∫øt, ta s·∫Ω t·∫°o n√™n gi√° tr·ªã ri√™ng","Cu·ªôc s·ªëng v·ªën nhi·ªÅu b·∫•t c√¥ng, kh√≥ thay ƒë·ªïi"],correct:2}
];

let current=0, scores=[0,0,0,0], names=[], luckyNumbers=[];

function drawWheel(rotation=0){
  const canvas=document.getElementById('wheelCanvas');
  if(!canvas) return;
  const ctx=canvas.getContext('2d');
  const segments=43, angleStep=2*Math.PI/segments;
  ctx.clearRect(0,0,400,400);
  ctx.save(); ctx.translate(200,200); ctx.rotate(rotation);
  for(let i=0;i<segments;i++){
    ctx.beginPath(); ctx.moveTo(0,0);
    ctx.fillStyle=i%2===0 ? '#7c3aed' : '#06b6d4';
    ctx.arc(0,0,200,i*angleStep,(i+1)*angleStep);
    ctx.fill();
    ctx.save(); ctx.rotate(i*angleStep+angleStep/2);
    ctx.fillStyle='white'; ctx.font='12px Arial';
    ctx.textAlign='right'; ctx.fillText(i+1,180,4); ctx.restore();
  }
  ctx.restore();
}

function spinWheel(){
  if(luckyNumbers.length>=4) return;
  const target=Math.floor(Math.random()*43);
  const duration=2000, start=performance.now(), startRot=Math.random()*2*Math.PI;
  function animate(t){
    const progress=Math.min(1,(t-start)/duration);
    const ease=Math.pow(progress,0.5);
    drawWheel(startRot + ease*10*Math.PI + target*2*Math.PI/43);
    if(progress<1) requestAnimationFrame(animate);
    else {
      const number=target+1;
      if(luckyNumbers.includes(number)){ spinWheel(); return; }
      luckyNumbers.push(number);
      document.getElementById('luckyNumbers').textContent='S·ªë may m·∫Øn: '+luckyNumbers.join(', ');
      if(luckyNumbers.length===4) document.getElementById('enterNameBtn').style.display='inline-block';
    }
  }
  requestAnimationFrame(animate);
}

document.addEventListener('DOMContentLoaded', ()=>{
  const startBtn = document.getElementById('startBtn');
  const wheelScreen = document.getElementById('wheelScreen');
  const startScreen = document.getElementById('startScreen');

  startBtn.addEventListener('click', ()=>{
    startScreen.style.display='none';
    wheelScreen.style.display='block';
    setTimeout(()=>drawWheel(0),50);
  });

  document.getElementById('spinBtn').addEventListener('click',spinWheel);
  document.getElementById('resetBtn').addEventListener('click',()=>{
    luckyNumbers=[]; document.getElementById('luckyNumbers').textContent=''; document.getElementById('enterNameBtn').style.display='none';
  });
  document.getElementById('enterNameBtn').addEventListener('click', ()=>{
    wheelScreen.style.display='none'; document.getElementById('nameScreen').style.display='block';
  });
});
</script>
</body>
</html>
